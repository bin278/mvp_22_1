# ç”Ÿæˆä»£ç é¡µé¢ - è®¢é˜…ä¿¡æ¯æ˜¾ç¤ºåŠŸèƒ½

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ·»åŠ çš„çŠ¶æ€å˜é‡

åœ¨ [app/generate/page.tsx:207-214](app/generate/page.tsx#L207-L214) æ·»åŠ äº†ä»¥ä¸‹çŠ¶æ€ï¼š

```typescript
const [subscriptionStatus, setSubscriptionStatus] = useState<string>('inactive')
const [subscriptionEndDate, setSubscriptionEndDate] = useState<string | null>(null)
const [codeUsage, setCodeUsage] = useState<{
  current: number
  limit: number
  remaining: number
  isUnlimited: boolean
} | null>(null)
```

### 2. æ›´æ–°çš„æ•°æ®åŠ è½½å‡½æ•°

åœ¨ `fetchUserSubscriptionTier()` å‡½æ•° [app/generate/page.tsx:132-189](app/generate/page.tsx#L132-L189) ä¸­ï¼š

- âœ… åŠ è½½è®¢é˜…çŠ¶æ€ (`subscriptionStatus`)
- âœ… åŠ è½½è®¢é˜…ç»“æŸæ—¥æœŸ (`subscriptionEndDate`)
- âœ… åŠ è½½ä»£ç ç”Ÿæˆä½¿ç”¨ç»Ÿè®¡ (`codeUsage`)

### 3. æ·»åŠ çš„å›¾æ ‡

åœ¨ [app/generate/page.tsx:6](app/generate/page.tsx#L6) æ·»åŠ äº†éœ€è¦çš„å›¾æ ‡ï¼š

```typescript
import { ..., Crown, Calendar, TrendingUp } from "lucide-react"
```

### 4. Header ä¸­çš„è®¢é˜…ä¿¡æ¯æ˜¾ç¤º

åœ¨ [app/generate/page.tsx:1570-1604](app/generate/page.tsx#L1570-L1604) æ·»åŠ äº†ä¸‰ä¸ªä¿¡æ¯å¡ç‰‡ï¼š

#### ğŸ“Œ è®¢é˜…ç­‰çº§å¡ç‰‡
- **å›¾æ ‡**: Crown (çš‡å† )
- **é¢œè‰²**:
  - Enterprise: ç¥ç€è‰²/é‡‘è‰²
  - Pro: è“è‰²
  - Free: ç°è‰²
- **æ˜¾ç¤º**: ä¼ä¸šç‰ˆ / ä¸“ä¸šç‰ˆ / å…è´¹ç‰ˆ

#### ğŸ“… å‰©ä½™å¤©æ•°å¡ç‰‡
- **å›¾æ ‡**: Calendar (æ—¥å†)
- **é¢œè‰²**: ç»¿è‰²
- **æ˜¾ç¤º**: è®¢é˜…åˆ°æœŸå‰çš„å‰©ä½™å¤©æ•°
- **æ¡ä»¶**: ä»…åœ¨ `subscriptionStatus === 'active'` æ—¶æ˜¾ç¤º

#### ğŸ“Š å‰©ä½™ç”Ÿæˆæ¬¡æ•°å¡ç‰‡
- **å›¾æ ‡**: TrendingUp (è¶‹åŠ¿ä¸Šå‡)
- **é¢œè‰²**: è“è‰²
- **æ˜¾ç¤ºæ ¼å¼**: `å‰©ä½™ / æ€»è®¡` (ä¾‹å¦‚: `25 / 30`)
- **æ— é™**: Enterprise ç‰ˆæ˜¾ç¤º `âˆ / âˆ`

---

## ğŸ¨ UI è®¾è®¡ç‰¹ç‚¹

### æ¸å˜èƒŒæ™¯
- ä½¿ç”¨ `bg-gradient-to-r` åˆ›å»ºæŸ”å’Œçš„æ¸å˜æ•ˆæœ
- æµ…è‰²æ¨¡å¼: `from-X-50 to-Y-50`
- æ·±è‰²æ¨¡å¼: `dark:from-X-950/30 dark:to-Y-950/30`

### è¾¹æ¡†æ ·å¼
- ç»†è¾¹æ¡†: `border`
- æŸ”å’Œçš„é¢œè‰²: `border-X-200` (æµ…è‰²) / `border-X-800` (æ·±è‰²)

### åœ†è§’å’Œé—´è·
- åœ†è§’: `rounded-lg`
- å†…è¾¹è·: `px-3 py-1.5` (ç´§å‡‘ä½†ä¸æ‹¥æŒ¤)
- é—´è·: `gap-3` (å¡ç‰‡ä¹‹é—´)

### å›¾æ ‡å’Œæ–‡å­—
- å›¾æ ‡å¤§å°: `h-4 w-4`
- æ–‡å­—å¤§å°: `text-sm`
- å­—é‡: `font-semibold` (é†’ç›®ä½†ä¸è¿‡åˆ†)

---

## ğŸ“ æ˜¾ç¤ºä½ç½®

è®¢é˜…ä¿¡æ¯æ˜¾ç¤ºåœ¨é¡µé¢ header ä¸­ï¼Œä½ç½®å¦‚ä¸‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† è¿”å›] | [ğŸ‘‘ ä¸“ä¸šç‰ˆ] [ğŸ“… 25å¤©] [ğŸ“Š 25/30 å‰©ä½™] | [é”®ç›˜] [ä¸­è‹±æ–‡] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æœ¬åœ°æµ‹è¯•

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 2. ç™»å½•åº”ç”¨
# 3. è®¿é—®ç”Ÿæˆä»£ç é¡µé¢
http://localhost:3000/generate

# 4. æ£€æŸ¥ header ä¸­çš„è®¢é˜…ä¿¡æ¯æ˜¾ç¤º
```

### 2. éªŒè¯æ¸…å•

- [ ] å…è´¹ç‰ˆç”¨æˆ·çœ‹åˆ° "å…è´¹ç‰ˆ" æ ‡ç­¾ï¼ˆç°è‰²ï¼‰
- [ ] Pro ç”¨æˆ·çœ‹åˆ° "ä¸“ä¸šç‰ˆ" æ ‡ç­¾ï¼ˆè“è‰²ï¼‰
- [ ] Enterprise ç”¨æˆ·çœ‹åˆ° "ä¼ä¸šç‰ˆ" æ ‡ç­¾ï¼ˆé‡‘è‰²ï¼‰
- [ ] æ´»è·ƒè®¢é˜…æ˜¾ç¤ºå‰©ä½™å¤©æ•°ï¼ˆç»¿è‰²ï¼‰
- [ ] æ˜¾ç¤ºå‰©ä½™ç”Ÿæˆæ¬¡æ•°ï¼ˆè“è‰²ï¼‰
- [ ] Enterprise ç‰ˆæ˜¾ç¤ºæ— é™ç¬¦å· (âˆ)
- [ ] æ·±è‰²æ¨¡å¼ä¸‹é¢œè‰²æ­£ç¡®æ˜¾ç¤º
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸ï¼ˆç§»åŠ¨ç«¯ä¸æº¢å‡ºï¼‰

---

## ğŸ“Š æ•°æ®æ¥æº

### è®¢é˜…ä¿¡æ¯
- **API**: `/api/subscription/status`
- **å­—æ®µ**: `planType`, `status`, `currentPeriodEnd`

### ä½¿ç”¨ç»Ÿè®¡
- **API**: `/api/subscription/check-usage`
- **å­—æ®µ**: `current`, `limit`, `remaining`, `isUnlimited`

### åŠ è½½æ—¶æœº
- é¡µé¢æŒ‚è½½æ—¶ (`useEffect` ç©ºä¾èµ–æ•°ç»„)
- ç”¨æˆ·ç™»å½•çŠ¶æ€å˜åŒ–æ—¶ (`authSession?.accessToken` ä¾èµ–)

---

## ğŸ¯ ä¸ä¸ªäººèµ„æ–™é¡µé¢çš„å¯¹æ¯”

ä¸ªäººèµ„æ–™é¡µé¢ ([app/profile/page.tsx](app/profile/page.tsx)) çš„ä½¿ç”¨ç»Ÿè®¡ï¼š
- âœ… å®Œæ•´çš„è¿›åº¦æ¡
- âœ… ç™¾åˆ†æ¯”æ˜¾ç¤º
- âœ… å¤§å·æ•°å­—æ˜¾ç¤º
- âœ… è¯¦ç»†çš„æ–‡å­—è¯´æ˜

ç”Ÿæˆä»£ç é¡µé¢ ([app/generate/page.tsx](app/generate/page.tsx)) çš„è®¢é˜…ä¿¡æ¯ï¼š
- âœ… ç´§å‡‘çš„å¡ç‰‡è®¾è®¡
- âœ… å›¾æ ‡ + ç®€çŸ­æ–‡å­—
- âœ… å¿«é€Ÿä¸€ç›®äº†ç„¶
- âœ… ä¸å ç”¨å¤ªå¤šç©ºé—´

ä¸¤ç§è®¾è®¡é€‚åˆä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š
- **ä¸ªäººèµ„æ–™é¡µ**: è¯¦ç»†æŸ¥çœ‹ï¼Œå…¨é¢äº†è§£
- **ç”Ÿæˆä»£ç é¡µ**: å¿«é€Ÿæµè§ˆï¼Œä¸å¹²æ‰°ä¸»è¦ä»»åŠ¡

---

## ğŸ”„ æ•°æ®åˆ·æ–°

### å½“å‰å®ç°
- âœ… é¡µé¢åŠ è½½æ—¶è·å–ä¸€æ¬¡æ•°æ®
- âœ… ç”¨æˆ·ç™»å½•çŠ¶æ€å˜åŒ–æ—¶é‡æ–°è·å–

### æœªæ¥æ”¹è¿›
- [ ] å®šæœŸè‡ªåŠ¨åˆ·æ–°ï¼ˆä¾‹å¦‚æ¯5åˆ†é’Ÿï¼‰
- [ ] ç”Ÿæˆä»£ç åç«‹å³åˆ·æ–°ä½¿ç”¨æ¬¡æ•°
- [ ] è®¢é˜…å³å°†è¿‡æœŸæ—¶æ˜¾ç¤ºæé†’

---

## ğŸ’¡ æ ·å¼è‡ªå®šä¹‰

å¦‚éœ€è°ƒæ•´æ ·å¼ï¼Œå¯ä»¥ä¿®æ”¹ä»¥ä¸‹ç±»åï¼š

### è°ƒæ•´å¡ç‰‡å¤§å°
```typescript
// å½“å‰: px-3 py-1.5
// æ›´å°: px-2 py-1
// æ›´å¤§: px-4 py-2
```

### è°ƒæ•´é—´è·
```typescript
// å½“å‰: gap-3
// æ›´ç´§å‡‘: gap-2
// æ›´å®½æ¾: gap-4
```

### è°ƒæ•´å­—ä½“å¤§å°
```typescript
// å½“å‰: text-sm
// æ›´å°: text-xs
// æ›´å¤§: text-base
```

### è°ƒæ•´åœ†è§’
```typescript
// å½“å‰: rounded-lg
// æ›´åœ†: rounded-xl
// æ›´æ–¹: rounded-md
```

---

## ğŸ“ ä»£ç ä½ç½®æ€»ç»“

| åŠŸèƒ½ | æ–‡ä»¶ä½ç½® |
|------|----------|
| çŠ¶æ€å®šä¹‰ | [app/generate/page.tsx:207-214](app/generate/page.tsx#L207-L214) |
| æ•°æ®åŠ è½½ | [app/generate/page.tsx:132-189](app/generate/page.tsx#L132-L189) |
| å›¾æ ‡å¯¼å…¥ | [app/generate/page.tsx:6](app/generate/page.tsx#L6) |
| UI æ˜¾ç¤º | [app/generate/page.tsx:1570-1604](app/generate/page.tsx#L1570-L1604) |

---

## âœ… å®ŒæˆçŠ¶æ€

- âœ… çŠ¶æ€å˜é‡å·²æ·»åŠ 
- âœ… æ•°æ®åŠ è½½å‡½æ•°å·²æ›´æ–°
- âœ… å¿…è¦çš„å›¾æ ‡å·²å¯¼å…¥
- âœ… è®¢é˜…ç­‰çº§æ˜¾ç¤ºå·²å®ç°
- âœ… å‰©ä½™å¤©æ•°æ˜¾ç¤ºå·²å®ç°
- âœ… å‰©ä½™ç”Ÿæˆæ¬¡æ•°æ˜¾ç¤ºå·²å®ç°
- âœ… ä¸­è‹±æ–‡æ”¯æŒå·²æ·»åŠ 
- âœ… æ·±è‰²æ¨¡å¼æ”¯æŒå·²æ·»åŠ 
- âœ… å“åº”å¼å¸ƒå±€å·²å®ç°

---

## ğŸ‰ åŠŸèƒ½æ€»ç»“

ç°åœ¨ç”Ÿæˆä»£ç é¡µé¢çš„ header ä¼šæ˜¾ç¤ºï¼š
1. **ğŸ‘‘ è®¢é˜…ç­‰çº§**: å…è´¹ç‰ˆ / ä¸“ä¸šç‰ˆ / ä¼ä¸šç‰ˆ
2. **ğŸ“… å‰©ä½™å¤©æ•°**: è®¢é˜…åˆ°æœŸå‰çš„å¤©æ•°ï¼ˆä»…æ´»è·ƒè®¢é˜…ï¼‰
3. **ğŸ“Š å‰©ä½™æ¬¡æ•°**: æœ¬æœˆå‰©ä½™çš„ä»£ç ç”Ÿæˆæ¬¡æ•°

è¿™äº›ä¿¡æ¯å¸®åŠ©ç”¨æˆ·ï¼š
- å¿«é€Ÿäº†è§£è‡ªå·±çš„è®¢é˜…çŠ¶æ€
- çŸ¥é“è¿˜èƒ½ç”Ÿæˆå¤šå°‘æ¬¡ä»£ç 
- çœ‹åˆ°è®¢é˜…è¿˜æœ‰å¤šå°‘å¤©åˆ°æœŸ
- åœ¨éœ€è¦æ—¶åŠæ—¶å‡çº§æˆ–ç»­è´¹

UI è®¾è®¡ç®€æ´ã€ç¾è§‚ï¼Œä¸ä¼šå¹²æ‰°ç”¨æˆ·çš„ä¸»è¦ä»»åŠ¡ï¼ˆç”Ÿæˆä»£ç ï¼‰ï¼ŒåŒæ—¶æä¾›è¶³å¤Ÿçš„ä¿¡æ¯è®©ç”¨æˆ·åšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚
