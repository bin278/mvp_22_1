# CloudBaseé‚®ç®±éªŒè¯ç æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ é—®é¢˜ï¼šæ”¶ä¸åˆ°éªŒè¯ç é‚®ä»¶

å¦‚æœæ‚¨åœ¨æ³¨å†Œæ—¶ç‚¹å‡»"å‘é€éªŒè¯ç "åæ²¡æœ‰æ”¶åˆ°é‚®ä»¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ£€æŸ¥ï¼š

### 1. æ£€æŸ¥CloudBaseæ§åˆ¶å°é…ç½®

#### **å¯ç”¨é‚®ç®±ç™»å½•**
1. è®¿é—® [CloudBaseæ§åˆ¶å°](https://console.cloud.tencent.com/tcb)
2. é€‰æ‹©æ‚¨çš„ç¯å¢ƒï¼š`cloud1-5gkes99x7b41ee3f`
3. ç‚¹å‡»å·¦ä¾§ **"ç”¨æˆ·ç®¡ç†"**
4. ç‚¹å‡» **"ç™»å½•è®¾ç½®"**
5. ç¡®ä¿ **"é‚®ç®±ç™»å½•"** å·²å¯ç”¨ âœ…

#### **é…ç½®é‚®ä»¶æ¨¡æ¿ï¼ˆå¯é€‰ä½†æ¨èï¼‰**
1. åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢ï¼Œæ‰¾åˆ° **"é‚®ä»¶æ¨¡æ¿"**
2. é…ç½®éªŒè¯ç é‚®ä»¶æ¨¡æ¿
3. è®¾ç½®å‘ä»¶äººä¿¡æ¯

### 2. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®

ç¡®ä¿ `.env.local` æ–‡ä»¶åŒ…å«æ­£ç¡®çš„é…ç½®ï¼š

```env
# å¿…éœ€çš„ç¯å¢ƒå˜é‡
NEXT_PUBLIC_TENCENT_CLOUD_ENV_ID=cloud1-5gkes99x7b41ee3f
AUTH_PROVIDER=cloudbase
DATABASE_PROVIDER=cloudbase
```

### 3. æ£€æŸ¥é‚®ç®±è®¾ç½®

#### **å¸¸è§é‚®ç®±é—®é¢˜**
- âœ… **é‚®ç®±åœ°å€æ­£ç¡®** - æ£€æŸ¥æ˜¯å¦æœ‰æ‹¼å†™é”™è¯¯
- âœ… **é‚®ç®±æœåŠ¡æ­£å¸¸** - å°è¯•å‘é€æµ‹è¯•é‚®ä»¶åˆ°è¯¥é‚®ç®±
- âœ… **åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹** - æ£€æŸ¥æ˜¯å¦è¢«è¯¯åˆ¤ä¸ºåƒåœ¾é‚®ä»¶
- âœ… **é‚®ç®±å®¹é‡** - ç¡®ä¿é‚®ç®±æ²¡æœ‰æ»¡

### 4. æµ‹è¯•éªŒè¯ç å‘é€

#### **å‰ç«¯æµ‹è¯•**
1. è®¿é—®æ³¨å†Œé¡µé¢ï¼š`http://localhost:3000/register`
2. å¡«å†™é‚®ç®±åœ°å€
3. ç‚¹å‡» **"å‘é€éªŒè¯ç "**
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡º

#### **é¢„æœŸæ—¥å¿—è¾“å‡º**
```
å¼€å§‹æ³¨å†Œæµç¨‹ï¼Œé‚®ç®±: your-email@example.com
è·å–åˆ°authå¯¹è±¡: true
æ£€æŸ¥æ³¨å†Œæ–¹æ³•:
- signUp: function
- signUpWithEmailAndPassword: undefined
å‘é€éªŒè¯ç åˆ°é‚®ç®±: your-email@example.com
éªŒè¯ç å‘é€æˆåŠŸ
```

### 5. CloudBaseç¯å¢ƒæƒé™æ£€æŸ¥

#### **æ£€æŸ¥ç¯å¢ƒçŠ¶æ€**
1. åœ¨CloudBaseæ§åˆ¶å°ï¼ŒæŸ¥çœ‹ç¯å¢ƒçŠ¶æ€
2. ç¡®ä¿ç¯å¢ƒå¤„äº **"æ­£å¸¸"** çŠ¶æ€
3. æ£€æŸ¥æ˜¯å¦æœ‰æ¬ è´¹æˆ–æƒé™é—®é¢˜

#### **æ£€æŸ¥é‚®ä»¶å‘é€æƒé™**
1. ç¡®è®¤æ‚¨çš„CloudBaseè´¦æˆ·æœ‰å‘é€é‚®ä»¶çš„æƒé™
2. æ£€æŸ¥æ˜¯å¦æœ‰æ¯æ—¥å‘é€é™åˆ¶

### 6. ç½‘ç»œå’Œé˜²ç«å¢™æ£€æŸ¥

#### **ç½‘ç»œè¿æ¥**
- âœ… ç¡®ä¿å¯ä»¥è®¿é—®è…¾è®¯äº‘æœåŠ¡
- âœ… æ£€æŸ¥æ˜¯å¦æœ‰ç½‘ç»œä»£ç†æˆ–VPNå½±å“
- âœ… å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒæµ‹è¯•

### 7. é«˜çº§æ•…éšœæ’é™¤

#### **æ£€æŸ¥CloudBase SDKç‰ˆæœ¬**
è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥SDKç‰ˆæœ¬ï¼š
```bash
npm list @cloudbase/js-sdk
```

#### **æµ‹è¯•CloudBaseè¿æ¥**
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š
```javascript
// æ£€æŸ¥CloudBaseæ˜¯å¦æ­£å¸¸åˆå§‹åŒ–
console.log('CloudBase app:', window.cloudbase?.app);

// æ£€æŸ¥è®¤è¯å¯¹è±¡
console.log('Auth object:', window.cloudbase?.app?.auth());
```

#### **éƒ¨ç½²äº‘å‡½æ•°å‘é€éªŒè¯ç **
å¦‚æœå‰ç«¯SDKä¸æ”¯æŒå‘é€éªŒè¯ç ï¼Œè¯·éƒ¨ç½²äº‘å‡½æ•°ï¼š

1. **å¤åˆ¶äº‘å‡½æ•°æ–‡ä»¶**
   ```
   å°†é¡¹ç›®ä¸­çš„ cloud-functions/sendEmailVerification æ–‡ä»¶å¤¹
   ä¸Šä¼ åˆ°æ‚¨çš„CloudBaseé¡¹ç›®äº‘å‡½æ•°ç›®å½•
   ```

2. **éƒ¨ç½²äº‘å‡½æ•°**
   - åœ¨CloudBaseæ§åˆ¶å°è¿›å…¥"äº‘å‡½æ•°"é¡µé¢
   - ç‚¹å‡»"æ–°å»ºäº‘å‡½æ•°"
   - ä¸Šä¼  sendEmailVerification æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
   - æˆ–ä½¿ç”¨ CloudBase CLIï¼š
   ```bash
   cloudbase functions:deploy sendEmailVerification
   ```

3. **æµ‹è¯•äº‘å‡½æ•°**
   ```javascript
   // åœ¨CloudBaseæ§åˆ¶å°æµ‹è¯•
   {
     "email": "your-email@example.com"
   }
   ```

äº‘å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ `auth.sendEmailCode()` å‘é€éªŒè¯ç é‚®ä»¶ã€‚

#### **æ‰‹åŠ¨æµ‹è¯•é‚®ä»¶å‘é€**
å¦‚æœå‰ç«¯æµ‹è¯•å¤±è´¥ï¼Œå¯ä»¥å°è¯•åœ¨CloudBaseäº‘å‡½æ•°ä¸­æµ‹è¯•ï¼š

```javascript
// åœ¨CloudBaseäº‘å‡½æ•°ä¸­æµ‹è¯•
const cloudbase = require('@cloudbase/node-sdk');
const app = cloudbase.init({/* é…ç½® */});
const auth = app.auth();

exports.main = async (event) => {
  try {
    await auth.sendEmailCode('test@example.com');
    return { success: true, message: 'é‚®ä»¶å‘é€æˆåŠŸ' };
  } catch (error) {
    return { success: false, error: error.message };
  }
};
```

### 8. å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### **é”™è¯¯ï¼š`credentials not found`**
**åŸå› ï¼š** ç¯å¢ƒå˜é‡æœªé…ç½®
**è§£å†³ï¼š** æ£€æŸ¥ `.env.local` æ–‡ä»¶

#### **é”™è¯¯ï¼š`verification token required`**
**åŸå› ï¼š** å°è¯•è·³è¿‡éªŒè¯ç ç›´æ¥æ³¨å†Œ
**è§£å†³ï¼š** å¿…é¡»å…ˆå‘é€éªŒè¯ç å†æ³¨å†Œ

#### **é”™è¯¯ï¼š`sendEmailCode is not a function`**
**åŸå› ï¼š** CloudBase SDKç‰ˆæœ¬é—®é¢˜
**è§£å†³ï¼š** ç¡®è®¤ä½¿ç”¨çš„æ˜¯Web SDKï¼š`@cloudbase/js-sdk`

#### **é”™è¯¯ï¼šç½‘ç»œè¯·æ±‚å¤±è´¥**
**åŸå› ï¼š** ç½‘ç»œæˆ–æƒé™é—®é¢˜
**è§£å†³ï¼š** æ£€æŸ¥CloudBaseæ§åˆ¶å°æƒé™è®¾ç½®

### 9. è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—** - æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
2. **è”ç³»CloudBaseæ”¯æŒ** - https://support.qq.com/products/148793
3. **æ£€æŸ¥å®˜æ–¹æ–‡æ¡£** - https://docs.cloudbase.net/authentication/email.html

### 10. å¤‡ç”¨æ–¹æ¡ˆ

å¦‚æœCloudBaseé‚®ä»¶æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œå¯ä»¥è€ƒè™‘ï¼š

#### **ä½¿ç”¨ç¬¬ä¸‰æ–¹é‚®ä»¶æœåŠ¡**
- é›†æˆSendGridã€Mailgunç­‰ç¬¬ä¸‰æ–¹é‚®ä»¶æœåŠ¡
- åœ¨CloudBaseäº‘å‡½æ•°ä¸­è°ƒç”¨ç¬¬ä¸‰æ–¹API

#### **çŸ­ä¿¡éªŒè¯ç **
- ä½¿ç”¨è…¾è®¯äº‘çŸ­ä¿¡æœåŠ¡å‘é€éªŒè¯ç 
- ä¿®æ”¹å‰ç«¯ç•Œé¢æ”¯æŒæ‰‹æœºå·éªŒè¯

### ğŸ“ æŠ€æœ¯æ”¯æŒ

- **CloudBaseå®˜æ–¹æ–‡æ¡£**: https://docs.cloudbase.net/
- **CloudBaseé—®ç­”ç¤¾åŒº**: https://support.qq.com/products/148793
- **è…¾è®¯äº‘å·¥å•**: https://console.cloud.tencent.com/workorder

---

**æœ€åæé†’**: è¯·ç¡®ä¿æŒ‰ç…§ä¸Šè¿°æ­¥éª¤é€ä¸€æ£€æŸ¥ï¼Œæœ€å¸¸è§çš„åŸå› ä¸ºCloudBaseæ§åˆ¶å°æœªå¯ç”¨é‚®ç®±ç™»å½•åŠŸèƒ½ã€‚
